# 📊 OVH 实时可用性查询页面

## 🎯 功能说明

全新的**实时可用性查询页面**，直接调用 OVH 公开 API，无需后端，无需认证！

---

## ✨ 主要特点

### 1. 🔓 无需认证
- **直接调用 OVH 公开 API**
- 不需要配置任何 API 密钥
- 不经过本地后端
- 完全前端实现

### 2. 📡 OVH 官方 API
```
https://eu.api.ovh.com/v1/dedicated/server/datacenter/availabilities
```

### 3. 🔍 强大的查询功能

#### 搜索功能
- 服务器代码（planCode）
- 服务器型号（server）
- 内存配置（memory）
- 存储配置（storage）
- 完整配置名（FQN）

#### 多维度过滤

**数据中心过滤**
- RBX - 法国鲁贝
- SBG - 法国斯特拉斯堡
- GRA - 法国格拉沃利纳
- BHS - 加拿大蒙特利尔
- SGP - 新加坡
- SYD - 澳大利亚悉尼
- YNM - 印度孟买
- WAW - 波兰华沙
- FRA - 德国法兰克福
- LON - 英国伦敦

**可用性状态过滤**
- 有货 - 任意数据中心有库存
- 1小时内 - 1H-low 或 1H-high
- 无货 - 所有数据中心无库存

**内存大小过滤**
- ≤ 128GB
- 128GB - 256GB
- 256GB - 512GB
- ≥ 1TB

#### 排序功能
- 按型号排序（A-Z）
- 按内存大小排序
- 按可用性排序

---

## 📦 数据结构

API 返回的每条记录包含：

```json
{
  "fqn": "完整配置名称",
  "memory": "ram-512g-ecc-4800",
  "planCode": "23scaleamd012",
  "server": "23scaleamd01",
  "storage": "softraid-2x1920nvme",
  "systemStorage": "softraid-2x960nvme-system",
  "datacenters": [
    {
      "datacenter": "sgp",
      "availability": "1H-low"
    },
    {
      "datacenter": "rbx",
      "availability": "72H"
    }
  ]
}
```

---

## 🎨 可用性状态说明

| 状态 | 含义 | 颜色 |
|------|------|------|
| `1H-low` | 1小时内可用-低库存 | 🟡 黄色 |
| `1H-high` | 1小时内可用-高库存 | 🟢 绿色 |
| `72H` | 72小时内可用 | 🔵 蓝色 |
| `480H` | 480小时（20天）内可用 | 🟣 紫色 |
| `unavailable` | 不可用 | 🔴 红色 |
| `unknown` | 未知 | ⚫ 灰色 |

---

## 💡 使用方法

### 1. 访问页面
点击侧边栏的 **"实时可用性"** 菜单项

### 2. 查看数据
页面会自动加载 OVH 最新数据（通常有数千条记录）

### 3. 搜索服务器
在搜索框输入关键词，例如：
- `23scaleamd012` - 查找特定型号
- `512g` - 查找512GB内存的服务器
- `nvme` - 查找使用NVMe存储的服务器

### 4. 应用过滤器
选择不同的过滤条件组合，快速定位目标服务器

### 5. 导出数据
点击 **"导出JSON"** 按钮，下载当前筛选结果

---

## 📊 统计信息

页面顶部实时显示：
- **总记录数** - 当前筛选结果总数
- **有货服务器** - 至少一个数据中心有库存的服务器数量
- **1小时内** - 1小时内可补货的服务器数量

---

## 🔄 刷新数据

点击右上角的 **"刷新数据"** 按钮，重新从 OVH API 获取最新数据

**注意：** 数据是实时的，每次刷新都会获取最新库存状态

---

## 🆚 与"服务器列表"页面的区别

| 特性 | 服务器列表 | 实时可用性 |
|------|-----------|-----------|
| **数据来源** | 后端缓存 + OVH API | 直接调用 OVH API |
| **需要认证** | ✅ 需要配置 API | ❌ 无需认证 |
| **数据范围** | 过滤后的服务器 | 所有服务器 |
| **功能** | 抢购、配置选择 | 查询、导出数据 |
| **更新频率** | 缓存2小时 | 实时查询 |
| **适用场景** | 实际抢购操作 | 快速查看库存 |

---

## 🎯 适用场景

### 场景1：快速查看库存
不需要登录，直接查看 OVH 所有服务器的实时库存状态

### 场景2：研究服务器配置
浏览所有可用的服务器型号和配置组合

### 场景3：比较数据中心
查看某个服务器在不同数据中心的可用性

### 场景4：导出数据分析
导出JSON数据用于外部分析或备份

### 场景5：无需配置即可使用
新用户无需配置 API 即可查看 OVH 库存情况

---

## ⚡ 性能说明

### 数据量
- 通常返回 **5000+** 条记录
- 覆盖所有 OVH 专用服务器
- 包含所有配置组合

### 加载时间
- 首次加载：**3-10秒**（取决于网络）
- 后续筛选：**实时响应**（前端处理）

### 优化建议
- 使用过滤器减少显示数量
- 搜索具体关键词快速定位
- 避免频繁刷新（数据不会实时变化）

---

## 🔗 技术实现

### 前端技术栈
- **React** + **TypeScript**
- **Axios** - HTTP 请求
- **Framer Motion** - 动画效果
- **Sonner** - Toast 通知

### API调用示例
```typescript
const response = await axios.get(
  'https://eu.api.ovh.com/v1/dedicated/server/datacenter/availabilities',
  { timeout: 30000 }
);
```

### 无需CORS代理
OVH API 已配置 CORS，可直接从浏览器调用

---

## 📝 常见问题

### Q1: 为什么加载时间较长？

**答：** OVH API 返回数据量很大（5000+ 条记录），首次加载需要一些时间。数据加载后，筛选和搜索都是实时的。

### Q2: 数据多久更新一次？

**答：** 每次点击"刷新数据"都会获取最新数据。OVH 库存状态通常每小时更新。

### Q3: 可以监控特定服务器吗？

**答：** 此页面用于查询。如需监控和抢购，请使用"服务器列表"页面。

### Q4: 为什么有些服务器显示 unknown？

**答：** OVH API 偶尔会返回 unknown 状态，通常表示暂时无法确定库存状态。

### Q5: 可以看到价格信息吗？

**答：** 此 API 只返回库存信息，不包含价格。价格需要访问 OVH 官网查看。

---

## 🎁 额外功能

### 导出数据
- 格式：JSON
- 内容：当前筛选结果
- 用途：数据分析、备份、分享

### 响应式设计
- 支持桌面、平板、手机
- 自适应布局
- 触摸优化

### 键盘快捷键
- 自动聚焦搜索框
- Enter 快速搜索

---

## 🚀 未来计划

- [ ] 添加价格信息（需要额外 API）
- [ ] 历史库存趋势图
- [ ] 库存变化提醒
- [ ] 收藏夹功能
- [ ] 导出 CSV 格式
- [ ] 更多筛选条件

---

## 📞 获取帮助

如有问题或建议，请查看：
- `README.md` - 项目说明
- `首次运行.md` - 配置指南

---

**享受实时查询 OVH 库存的便利！** 🎉

---

*创建时间：2025-10-21*  
*版本：1.0*
