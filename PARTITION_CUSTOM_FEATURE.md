# è‡ªå®šä¹‰åˆ†åŒºé…ç½®åŠŸèƒ½è®¾è®¡

## ğŸ¯ åŠŸèƒ½ç›®æ ‡

ç”¨æˆ·å¯ä»¥é€‰æ‹©ï¼š
1. **ä½¿ç”¨é¢„å®šä¹‰æ–¹æ¡ˆ** - é€‰æ‹©æ¨¡æ¿è‡ªå¸¦çš„åˆ†åŒºæ–¹æ¡ˆï¼ˆå¦‚"default"ï¼‰
2. **å®Œå…¨è‡ªå®šä¹‰åˆ†åŒº** - æ‰‹åŠ¨é…ç½®æ¯ä¸ªåˆ†åŒºçš„æŒ‚è½½ç‚¹ã€å¤§å°ã€æ–‡ä»¶ç³»ç»Ÿç­‰

## ğŸ“‹ OVH API æ”¯æŒ

### é€‰é¡¹1: ä½¿ç”¨é¢„å®šä¹‰æ–¹æ¡ˆ
```json
{
  "storage": [{
    "diskGroupId": 0,
    "partitioning": [{
      "schemeName": "default"
    }]
  }]
}
```

### é€‰é¡¹2: è‡ªå®šä¹‰åˆ†åŒºå¸ƒå±€
```json
{
  "storage": [{
    "diskGroupId": 0,
    "partitioning": [{
      "layout": [
        {
          "mountPoint": "/",
          "fileSystem": "ext4",
          "size": 20480,        // MB, 0 = ä½¿ç”¨å‰©ä½™ç©ºé—´
          "raidLevel": 1,       // å¯é€‰
          "order": 1,
          "type": "primary"
        }
      ]
    }]
  }]
}
```

## ğŸ¨ UIè®¾è®¡

### åˆ†åŒºé…ç½®æ¨¡å¼é€‰æ‹©
```
[ ] ä½¿ç”¨é»˜è®¤åˆ†åŒºï¼ˆæ¨èï¼‰
[ ] ä½¿ç”¨é¢„å®šä¹‰æ–¹æ¡ˆ
    â””â”€ ä¸‹æ‹‰é€‰æ‹©: default (3ä¸ªåˆ†åŒº)
[ ] å®Œå…¨è‡ªå®šä¹‰åˆ†åŒºï¼ˆé«˜çº§ï¼‰
    â””â”€ åˆ†åŒºç¼–è¾‘å™¨
```

### è‡ªå®šä¹‰åˆ†åŒºç¼–è¾‘å™¨

```
â”Œâ”€ åˆ†åŒºé…ç½® â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                            â”‚
â”‚  åˆ†åŒº 1 - æ ¹åˆ†åŒº                     [åˆ é™¤] â”‚
â”‚  æŒ‚è½½ç‚¹: [/          â–¼]                    â”‚
â”‚  æ–‡ä»¶ç³»ç»Ÿ: [ext4      â–¼]                   â”‚
â”‚  å¤§å°: [20480] MB  ( 0 = ä½¿ç”¨å‰©ä½™ç©ºé—´ )     â”‚
â”‚  RAIDçº§åˆ«: [1        â–¼]                    â”‚
â”‚  ç±»å‹: [primary    â–¼]                      â”‚
â”‚                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  åˆ†åŒº 2 - Bootåˆ†åŒº                   [åˆ é™¤] â”‚
â”‚  æŒ‚è½½ç‚¹: [/boot      â–¼]                    â”‚
â”‚  æ–‡ä»¶ç³»ç»Ÿ: [ext4      â–¼]                   â”‚
â”‚  å¤§å°: [512] MB                            â”‚
â”‚  ...                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                            â”‚
â”‚  [+ æ·»åŠ åˆ†åŒº]                              â”‚
â”‚                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”§ å®ç°æ­¥éª¤

### å‰ç«¯å®ç°

#### 1. æ·»åŠ åˆ†åŒºæ¨¡å¼çŠ¶æ€
```typescript
type PartitionMode = 'default' | 'scheme' | 'custom';
const [partitionMode, setPartitionMode] = useState<PartitionMode>('default');
const [customLayout, setCustomLayout] = useState<PartitionLayout[]>([]);
```

#### 2. åˆ†åŒºé…ç½®ç±»å‹
```typescript
interface PartitionLayout {
  mountPoint: string;
  fileSystem: string;
  size: number;         // MB
  raidLevel?: number;
  order: number;
  type: string;
}
```

#### 3. UIç»„ä»¶
- æ¨¡å¼é€‰æ‹©RadioæŒ‰é’®
- é¢„å®šä¹‰æ–¹æ¡ˆä¸‹æ‹‰æ¡†
- è‡ªå®šä¹‰åˆ†åŒºç¼–è¾‘å™¨ï¼ˆæ·»åŠ /ç¼–è¾‘/åˆ é™¤åˆ†åŒºï¼‰

### åç«¯å®ç°

#### ä¿®æ”¹å®‰è£…APIæ¥æ”¶å‚æ•°
```python
# backend/app.py
data = request.json
partition_mode = data.get('partitionMode')  # 'default', 'scheme', 'custom'

if partition_mode == 'scheme':
    # ä½¿ç”¨é¢„å®šä¹‰æ–¹æ¡ˆ
    install_params['storage'] = [{
        'diskGroupId': 0,
        'partitioning': [{
            'schemeName': data['partitionSchemeName']
        }]
    }]
elif partition_mode == 'custom':
    # ä½¿ç”¨è‡ªå®šä¹‰å¸ƒå±€
    install_params['storage'] = [{
        'diskGroupId': 0,
        'partitioning': [{
            'layout': data['customLayout']  # åˆ†åŒºæ•°ç»„
        }]
    }]
# else: é»˜è®¤ï¼Œä¸ä¼ storageå‚æ•°
```

## ğŸ“ å­—æ®µé€‰é¡¹

### æ–‡ä»¶ç³»ç»Ÿ (fileSystem)
- ext3, ext4
- xfs, btrfs
- swap
- ntfs (Windows)
- fat16
- vmfs5, vmfs6 (VMware)
- zfs

### RAIDçº§åˆ« (raidLevel)
- 0 - æ¡å¸¦åŒ–ï¼ˆæ— å†—ä½™ï¼‰
- 1 - é•œåƒï¼ˆæ¨èï¼‰
- 5 - åˆ†å¸ƒå¼å¥‡å¶æ ¡éªŒ
- 6 - åŒé‡å¥‡å¶æ ¡éªŒ
- 7, 10 - å…¶ä»–çº§åˆ«

### æŒ‚è½½ç‚¹ (mountPoint)
- / (æ ¹åˆ†åŒºï¼Œå¿…éœ€)
- /boot (å¼•å¯¼åˆ†åŒº)
- /home (ç”¨æˆ·ç›®å½•)
- /var (å˜é‡æ•°æ®)
- /tmp (ä¸´æ—¶æ–‡ä»¶)
- swap (äº¤æ¢ç©ºé—´)

### åˆ†åŒºç±»å‹ (type)
- primary (ä¸»åˆ†åŒº)
- logical (é€»è¾‘åˆ†åŒº)

## âš ï¸ éªŒè¯è§„åˆ™

1. **å¿…é¡»æœ‰æ ¹åˆ†åŒº** - mountPoint = "/"
2. **åˆ†åŒºå¤§å°åˆç†** - æ€»å’Œä¸è¶…è¿‡ç£ç›˜å®¹é‡
3. **è‡³å°‘ä¸€ä¸ªåˆ†åŒº** - ä¸èƒ½ä¸ºç©º
4. **æŒ‚è½½ç‚¹å”¯ä¸€** - ä¸èƒ½é‡å¤ï¼ˆé™¤swapå¤–ï¼‰
5. **å¤§å°ä¸º0åªèƒ½æœ‰1ä¸ª** - è¡¨ç¤ºä½¿ç”¨å‰©ä½™ç©ºé—´

## ğŸ¯ æ¨èçš„é¢„è®¾åˆ†åŒºæ–¹æ¡ˆ

### æ ‡å‡†LinuxæœåŠ¡å™¨
```
/ (ext4, 20GB, RAID1)
/boot (ext4, 512MB, RAID1)
swap (swap, 4GB, RAID1)
```

### å¤§æ•°æ®æœåŠ¡å™¨
```
/ (ext4, 50GB, RAID1)
/boot (ext4, 512MB, RAID1)
/var (ext4, 100GB, RAID5)
/home (xfs, å‰©ä½™ç©ºé—´, RAID5)
swap (swap, 16GB, RAID1)
```

## ğŸš€ å®æ–½ä¼˜å…ˆçº§

**Phase 1 (å½“å‰):**
- âœ… ä½¿ç”¨é»˜è®¤åˆ†åŒº
- âœ… é€‰æ‹©é¢„å®šä¹‰æ–¹æ¡ˆ

**Phase 2 (ä¸‹ä¸€æ­¥):**
- â³ è‡ªå®šä¹‰åˆ†åŒºç¼–è¾‘å™¨UI
- â³ å‰ç«¯éªŒè¯é€»è¾‘
- â³ åç«¯æ¥æ”¶è‡ªå®šä¹‰å¸ƒå±€

**Phase 3 (æœªæ¥):**
- â³ é¢„è®¾æ–¹æ¡ˆæ¨¡æ¿
- â³ åˆ†åŒºå¤§å°è®¡ç®—å™¨
- â³ é«˜çº§é€‰é¡¹ï¼ˆLVM, ZFSç­‰ï¼‰
